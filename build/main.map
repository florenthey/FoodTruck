{"version":3,"sources":["webpack:///webpack/bootstrap 9562b66fb6e2e1b8b382","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./src/models/truck.js","webpack:///./src/models/review.js","webpack:///./src/index.js","webpack:///external \"dotenv/config\"","webpack:///external \"volleyball\"","webpack:///./src/routes/truck.js"],"names":["Schema","mongoose","truckSchema","name","type","String","speciality","price","Number","reviews","Types","ObjectId","ref","Truck","model","ReviewSchema","title","text","truck","Review","app","express","PORT","url_DB","process","env","connect","db","connection","on","console","error","bind","once","log","use","json","urlencoded","extended","req","res","send","listen","truckRouter","Router","get","find","err","post","newTruck","body","save","redirect","_id","params","id","findById","put","Object","assign","message","delete","remove","newReview","review","push"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9562b66fb6e2e1b8b382","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","import mongoose from 'mongoose';\nimport { Review } from './review';\n\nconst Schema = mongoose.Schema;\n\nconst truckSchema = new Schema({\n    name : {type : String},\n    speciality : {type : String},\n    price : {type : Number},\n    reviews : [{type : Schema.Types.ObjectId, ref : 'Review'}]\n})\n\nconst Truck = mongoose.model('Truck', truckSchema);\n\nexport { Truck }\n\n\n// WEBPACK FOOTER //\n// ./src/models/truck.js","import mongoose from 'mongoose';\nimport { Truck } from './truck';\n\nconst Schema = mongoose.Schema\n\nconst ReviewSchema = new Schema({\n    title : String,\n    text : String,\n    truck : {type : Schema.Types.ObjectId, ref : 'Truck'}\n})\n\nconst Review = mongoose.model('Review', ReviewSchema)\n\nexport { Review }\n\n\n// WEBPACK FOOTER //\n// ./src/models/review.js","import express, { urlencoded } from 'express';\nimport 'dotenv/config';\nconst app = express();\nconst { PORT, url_DB } = process.env;\nimport volleyball from \"volleyball\";\nimport mongoose from 'mongoose';\nimport { truckRouter } from './routes/truck';\n\nmongoose.connect(url_DB);\nconst db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function() {\n  console.log('[MongoDB] Connected !')\n});\n\napp.use(express.json());\napp.use(volleyball);\napp.use(express.urlencoded({extended : false}));\n\napp.use('/food-truck', truckRouter);\napp.use('/', (req, res) => {\n    res.send(\"Bien jouÃ© !\");\n})\n\napp.listen(PORT, () => {\n    console.log(`[APP running on port : ${PORT}]`);\n})\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"dotenv/config\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv/config\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"volleyball\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"volleyball\"\n// module id = 7\n// module chunks = 0","import express from 'express';\nimport { Truck } from '../models/truck';\nimport { Review } from '../models/review';\nconst truckRouter = express.Router();\n\ntruckRouter.get('/', (req, res ) => {\n    Truck.find({}, (err, truck) => {\n        if (err) res.send(err)\n            res.send(truck)\n    })\n})\n\ntruckRouter.post('/add', (req, res) => {\n    const newTruck = new Truck(req.body)\n    newTruck.save((err, truck) => {\n        if (err) res.send(err)\n            res.json(truck)\n            res.redirect('/food-truck/')\n    })\n})\n\ntruckRouter.get('/:id', (req, res) => {\n    let _id = req.params.id;\n    Truck.findById({_id}, (err, truck) => {\n        if (err) res.send(err)\n            res.json(truck)\n    })\n})\n\n// truckRouter.put('/:id', (req, res) => {\n//     Truck.findById(req.params.id, (err, truck) => {\n//         if (err) res.send(err)\n//             truck.name = req.body.name;\n//             truck.speciality = req.body.speciality;\n//             truck.price = req.body.price;\n//             truck.save((err) => {\n//                 if (err) res.send(err)\n//                 res.json({message : \"Food Truck uploded !\"})\n//             })\n//     })\n// })\n\ntruckRouter.put('/:id', (req, res) => {\n    Truck.findById(req.params.id, (err, truck) => {\n        if (err) res.send(err)\n            Object.assign(truck, req.body).save((err, truck) => {\n                if (err) res.send(err)\n                res.json({message : \"Food Truck uploded !\", truck})\n            })\n    })\n})\n\ntruckRouter.delete('/:id', (req, res) => {\n    Truck.remove({_id : req.params.id}, (err, truck) => {\n        if (err) res.send(err)\n            res.json({message : \"Food Truck deleted !\", truck})\n    })\n})\n\ntruckRouter.post('/review/add/:id', (req, res) => {\n    Truck.findById(req.params.id, (err, truck) => {\n        if (err) res.send(err)\n            const newReview = new Review(req.body)\n            newReview.save((err, review) => {\n                if (err) res.send(err)\n                    truck.reviews.push(newReview)\n                    truck.save((err, review) => {\n                        if (err) res.send(err)\n                            res.json({message : 'Add review !', review})\n                    })\n            })\n    })\n})\n\nexport { truckRouter }\n\n\n// WEBPACK FOOTER //\n// ./src/routes/truck.js"],"sourceRoot":""}